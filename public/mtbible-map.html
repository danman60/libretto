<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Libretto MTBible Enrichment Map</title>
<style>
  :root {
    --gold: #C9A84C;
    --gold-light: #E8C872;
    --gold-dim: #8A7434;
    --burgundy: #6B1D2A;
    --burgundy-light: #8E2E3E;
    --bg: #08070A;
    --bg-card: #12101A;
    --bg-card-alt: #1A0F1E;
    --cream: #F2E8D5;
    --cream-muted: #B8AD9A;
    --green: #4CAF50;
    --red: #E53935;
    --blue: #42A5F5;
    --orange: #FFA726;
    --purple: #AB47BC;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--cream);
    font-family: 'Georgia', 'Times New Roman', serif;
    line-height: 1.6;
    padding: 16px;
    max-width: 900px;
    margin: 0 auto;
  }

  h1 {
    text-align: center;
    color: var(--gold);
    font-size: 1.8rem;
    margin-bottom: 4px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .subtitle {
    text-align: center;
    color: var(--cream-muted);
    font-size: 0.9rem;
    margin-bottom: 24px;
    font-style: italic;
  }

  h2 {
    color: var(--gold);
    font-size: 1.3rem;
    margin: 28px 0 12px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--gold-dim);
    letter-spacing: 1px;
  }

  h3 {
    color: var(--gold-light);
    font-size: 1.1rem;
    margin: 16px 0 8px;
  }

  .section {
    background: var(--bg-card);
    border: 1px solid rgba(201, 168, 76, 0.2);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
  }

  .section.highlight {
    border-color: var(--gold-dim);
    background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-card-alt) 100%);
  }

  /* Commandments */
  .commandments {
    display: grid;
    gap: 8px;
  }

  .commandment {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    padding: 8px 10px;
    background: rgba(201, 168, 76, 0.05);
    border-radius: 8px;
    border-left: 3px solid var(--gold-dim);
  }

  .commandment.critical {
    border-left: 3px solid var(--gold);
    background: rgba(201, 168, 76, 0.12);
  }

  .commandment .num {
    color: var(--gold);
    font-weight: bold;
    min-width: 24px;
    font-size: 0.9rem;
  }

  .commandment .text {
    font-size: 0.85rem;
    color: var(--cream);
  }

  .commandment .text strong {
    color: var(--gold-light);
  }

  /* Current vs Proposed */
  .comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  @media (max-width: 600px) {
    .comparison { grid-template-columns: 1fr; }
  }

  .col-current {
    background: rgba(229, 57, 53, 0.08);
    border: 1px solid rgba(229, 57, 53, 0.3);
    border-radius: 10px;
    padding: 12px;
  }

  .col-proposed {
    background: rgba(76, 175, 80, 0.08);
    border: 1px solid rgba(76, 175, 80, 0.3);
    border-radius: 10px;
    padding: 12px;
  }

  .col-current h3 { color: var(--red); }
  .col-proposed h3 { color: var(--green); }

  ul {
    padding-left: 18px;
    font-size: 0.85rem;
  }

  ul li {
    margin-bottom: 4px;
    color: var(--cream-muted);
  }

  ul li strong {
    color: var(--cream);
  }

  /* Genre Cards */
  .genre-grid {
    display: grid;
    gap: 12px;
  }

  .genre-card {
    background: var(--bg-card);
    border: 1px solid rgba(201, 168, 76, 0.15);
    border-radius: 12px;
    overflow: hidden;
  }

  .genre-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: rgba(201, 168, 76, 0.08);
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  .genre-header:active {
    background: rgba(201, 168, 76, 0.15);
  }

  .genre-icon {
    font-size: 1.5rem;
  }

  .genre-name {
    font-size: 1rem;
    color: var(--gold);
    font-weight: bold;
    flex: 1;
  }

  .genre-toggle {
    color: var(--gold-dim);
    font-size: 1.2rem;
    transition: transform 0.2s;
  }

  .genre-card.open .genre-toggle {
    transform: rotate(90deg);
  }

  .genre-body {
    display: none;
    padding: 14px;
  }

  .genre-card.open .genre-body {
    display: block;
  }

  /* Song form tags */
  .form-tag {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
    letter-spacing: 1px;
    margin-right: 4px;
    font-family: monospace;
  }

  .form-aaba { background: rgba(66, 165, 245, 0.2); color: var(--blue); border: 1px solid rgba(66, 165, 245, 0.4); }
  .form-abab { background: rgba(76, 175, 80, 0.2); color: var(--green); border: 1px solid rgba(76, 175, 80, 0.4); }
  .form-free { background: rgba(255, 167, 38, 0.2); color: #FFA726; border: 1px solid rgba(255, 167, 38, 0.4); }
  .form-vcvc { background: rgba(229, 57, 53, 0.2); color: #EF9A9A; border: 1px solid rgba(229, 57, 53, 0.3); }

  /* Song role rows */
  .song-role {
    padding: 10px 0;
    border-bottom: 1px solid rgba(201, 168, 76, 0.1);
  }

  .song-role:last-child { border-bottom: none; }

  .song-role-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 4px;
  }

  .song-role-num {
    background: var(--gold-dim);
    color: var(--bg);
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
  }

  .song-role-name {
    color: var(--gold-light);
    font-weight: bold;
    font-size: 0.9rem;
  }

  .song-role-detail {
    font-size: 0.8rem;
    color: var(--cream-muted);
    padding-left: 30px;
  }

  .song-role-detail .new {
    color: var(--green);
    font-weight: bold;
  }

  /* Pipeline flow */
  .pipeline {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .pipeline-step {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    background: rgba(201, 168, 76, 0.05);
    border-radius: 8px;
    border-left: 3px solid var(--gold-dim);
  }

  .pipeline-step .step-num {
    background: var(--gold);
    color: var(--bg);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
    flex-shrink: 0;
  }

  .pipeline-step .step-text {
    font-size: 0.85rem;
  }

  .pipeline-step .step-text strong {
    color: var(--gold-light);
  }

  .pipeline-arrow {
    text-align: center;
    color: var(--gold-dim);
    font-size: 0.9rem;
  }

  /* Notes area */
  .note-box {
    background: rgba(142, 46, 62, 0.15);
    border: 1px solid rgba(142, 46, 62, 0.3);
    border-radius: 8px;
    padding: 12px;
    margin-top: 12px;
  }

  .note-box h4 {
    color: var(--burgundy-light);
    font-size: 0.9rem;
    margin-bottom: 6px;
  }

  .note-box p, .note-box ul {
    font-size: 0.8rem;
    color: var(--cream-muted);
  }

  .note-box.idea {
    background: rgba(171, 71, 188, 0.12);
    border-color: rgba(171, 71, 188, 0.3);
  }

  .note-box.idea h4 {
    color: var(--purple);
  }

  /* Archetype matrix */
  .archetype-row {
    display: flex;
    gap: 6px;
    align-items: flex-start;
    padding: 8px 0;
    border-bottom: 1px solid rgba(201, 168, 76, 0.08);
  }

  .archetype-row:last-child { border-bottom: none; }

  .archetype-label {
    min-width: 100px;
    color: var(--gold);
    font-size: 0.8rem;
    font-weight: bold;
    padding-top: 2px;
  }

  .archetype-desc {
    font-size: 0.8rem;
    color: var(--cream-muted);
    flex: 1;
  }

  /* Footer */
  .footer {
    text-align: center;
    color: var(--cream-muted);
    font-size: 0.75rem;
    margin-top: 32px;
    padding-top: 16px;
    border-top: 1px solid rgba(201, 168, 76, 0.1);
    font-style: italic;
  }

  /* Expandable sections */
  details {
    margin-bottom: 8px;
  }

  details summary {
    cursor: pointer;
    color: var(--gold-light);
    font-weight: bold;
    font-size: 0.9rem;
    padding: 6px 0;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  details summary:active {
    color: var(--gold);
  }

  .badge {
    display: inline-block;
    padding: 1px 6px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: bold;
    vertical-align: middle;
    margin-left: 4px;
  }

  .badge-new { background: rgba(76, 175, 80, 0.2); color: var(--green); }
  .badge-upgrade { background: rgba(66, 165, 245, 0.2); color: var(--blue); }
  .badge-keep { background: rgba(255, 255, 255, 0.1); color: var(--cream-muted); }
  .badge-critical { background: rgba(229, 57, 53, 0.2); color: var(--red); }
  .badge-idea { background: rgba(171, 71, 188, 0.2); color: var(--purple); }

  /* Suno tag styles */
  .suno-tag {
    display: inline-block;
    padding: 1px 6px;
    border-radius: 3px;
    font-size: 0.75rem;
    font-family: monospace;
    background: rgba(201, 168, 76, 0.1);
    color: var(--gold-light);
    border: 1px solid rgba(201, 168, 76, 0.2);
    margin: 1px 2px;
  }

  .suno-structure {
    background: rgba(66, 165, 245, 0.1);
    color: var(--blue);
    border-color: rgba(66, 165, 245, 0.3);
  }

  .suno-bad {
    background: rgba(229, 57, 53, 0.1);
    color: #EF9A9A;
    border-color: rgba(229, 57, 53, 0.3);
    text-decoration: line-through;
  }

  /* Energy meter */
  .energy-bar {
    display: flex;
    align-items: center;
    gap: 6px;
    margin: 4px 0;
  }

  .energy-bar .label {
    min-width: 110px;
    font-size: 0.8rem;
    color: var(--cream-muted);
  }

  .energy-bar .bar-bg {
    flex: 1;
    height: 14px;
    background: rgba(255,255,255,0.05);
    border-radius: 7px;
    overflow: hidden;
  }

  .energy-bar .bar-fill {
    height: 100%;
    border-radius: 7px;
    transition: width 0.3s;
  }

  .energy-bar .val {
    min-width: 36px;
    font-size: 0.75rem;
    color: var(--cream-muted);
    text-align: right;
    font-family: monospace;
  }

  /* Tempo tag */
  .tempo-tag {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
    font-family: monospace;
    background: rgba(255, 167, 38, 0.15);
    color: var(--orange);
    border: 1px solid rgba(255, 167, 38, 0.3);
    margin-left: 6px;
  }

  code {
    background: rgba(201, 168, 76, 0.1);
    padding: 1px 4px;
    border-radius: 3px;
    font-size: 0.8rem;
    color: var(--gold-light);
  }
</style>
</head>
<body>

<h1>MTBible Enrichment Map</h1>
<p class="subtitle">How BMI Lehman Engel principles upgrade Libretto's AI musical generation</p>

<!-- ============ SECTION 1: Core Principles ============ -->
<h2>1. Pat's 10 Commandments of MT Lyrics</h2>
<div class="section highlight">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    These become <strong style="color:var(--green);">injected into every lyrics prompt</strong> &mdash; the LLM's songwriting rulebook.
  </p>
  <div class="commandments">
    <div class="commandment critical">
      <span class="num">1</span>
      <span class="text"><strong>Be singable.</strong> Sustained vowels on key notes. Don't sing it so fast it cannot be understood. Singable means sustained &mdash; a joy for the singer to perform.</span>
    </div>
    <div class="commandment">
      <span class="num">2</span>
      <span class="text"><strong>Be understandable.</strong> Not opera &mdash; audience must grasp lyrics in real time. If they stop to think, you've lost them.</span>
    </div>
    <div class="commandment">
      <span class="num">3</span>
      <span class="text"><strong>One thing only.</strong> Encapsulated in the hook. Say "I love you" in a new/fresh way. Embrace subtext.</span>
    </div>
    <div class="commandment">
      <span class="num">4</span>
      <span class="text"><strong>Be specific.</strong> "Riding on a smile and a shoeshine" not "he was a salesman." Specifics make songs memorable.</span>
    </div>
    <div class="commandment">
      <span class="num">5</span>
      <span class="text"><strong>Write dramatically.</strong> Ideas in ascending order of punch. Write backwards for progression. End in a different place.</span>
    </div>
    <div class="commandment">
      <span class="num">6</span>
      <span class="text"><strong>No self-pity</strong> (except in comedy). Keep it positive. In comedy, if complaining, make it FUNNY.</span>
    </div>
    <div class="commandment critical">
      <span class="num">7</span>
      <span class="text"><strong>Correct scansion.</strong> <span class="badge badge-critical">CRITICAL</span> Don't misaccent words. Stress patterns of lyrics MUST match the natural melody rhythm. Wrong scansion breaks the illusion &mdash; nothing pulls an audience out faster than a misaccented word.</span>
    </div>
    <div class="commandment">
      <span class="num">8</span>
      <span class="text"><strong>Fresh images.</strong> No clich&eacute;s. Find new metaphors, new angles of vision.</span>
    </div>
    <div class="commandment">
      <span class="num">9</span>
      <span class="text"><strong>No false rhyme.</strong> Don't transpose words for rhyme. "Familiarity breeds content" &mdash; Sondheim</span>
    </div>
    <div class="commandment">
      <span class="num">10</span>
      <span class="text"><strong>Not rigid or wordy.</strong> Characters make up lyrics spontaneously. Don't look "square."</span>
    </div>
  </div>
</div>

<!-- ============ SECTION 2: Song Forms ============ -->
<h2>2. Song Form &mdash; Current vs. Proposed</h2>
<div class="section">
  <div class="comparison">
    <div class="col-current">
      <h3>Current (All Genres)</h3>
      <p style="font-size:0.85rem; margin-bottom:8px;">Every song forced into:</p>
      <p style="font-family:monospace; font-size:0.85rem; color:#EF9A9A;">
        [Verse 1]<br>[Chorus]<br>[Verse 2]<br>[Chorus]<br>[Bridge]<br>[Chorus]
      </p>
      <p style="font-size:0.8rem; color:var(--cream-muted); margin-top:8px;">
        Pop structure. Not theatrical. Identical chorus 3x mandated.
      </p>
    </div>
    <div class="col-proposed">
      <h3>Proposed (Per-Genre)</h3>
      <p style="font-size:0.85rem; margin-bottom:8px;">Form follows genre tradition:</p>
      <div style="margin-top:6px;">
        <span class="form-tag form-aaba">AABA</span> Classic Broadway, Disney<br>
        <span class="form-tag form-abab">ABAB</span> Romantic, Jukebox<br>
        <span class="form-tag form-free">FREE</span> Hip-Hop (verse/hook/verse/hook)<br>
        <span class="form-tag form-vcvc">V/C/V/C/B/C</span> Rock Opera (keep pop-rock form)
      </div>
      <p style="font-size:0.8rem; color:var(--cream-muted); margin-top:8px;">
        8-bar phrases. Chorus = reframed each time, not identical.
      </p>
    </div>
  </div>
</div>

<!-- ============ SECTION 3: Enrichment Pipeline ============ -->
<h2>3. Enrichment Pipeline Upgrade</h2>
<div class="section highlight">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    The enrichment step (DeepSeek expands 1 sentence &rarr; ShowConcept) gets dramatically richer.
  </p>
  <div class="pipeline">
    <div class="pipeline-step">
      <span class="step-num">1</span>
      <span class="step-text"><strong>User input</strong> &mdash; genre + one sentence idea (unchanged)</span>
    </div>
    <div class="pipeline-arrow">&darr;</div>
    <div class="pipeline-step">
      <span class="step-num">2</span>
      <span class="step-text"><strong>Enrichment prompt</strong> <span class="badge badge-upgrade">UPGRADE</span> &mdash; now includes genre-specific MT craft principles, dramatic arc rules, specificity doctrine</span>
    </div>
    <div class="pipeline-arrow">&darr;</div>
    <div class="pipeline-step">
      <span class="step-num">2b</span>
      <span class="step-text"><strong>Artist Research</strong> <span class="badge badge-idea">JUKEBOX ONLY</span> &mdash; if user names an artist, quick web lookup of their musical style, arrangement patterns, signature sounds &rarr; feed into style prompts</span>
    </div>
    <div class="pipeline-arrow">&darr;</div>
    <div class="pipeline-step">
      <span class="step-num">3</span>
      <span class="step-text"><strong>ShowConcept output</strong> <span class="badge badge-upgrade">UPGRADE</span> &mdash; adds <em>tension_pacing</em>, <em>song_briefs[]</em> with per-song form/archetype/energy/tempo/guidance</span>
    </div>
    <div class="pipeline-arrow">&darr;</div>
    <div class="pipeline-step">
      <span class="step-num">4</span>
      <span class="step-text"><strong>Lyrics prompt</strong> <span class="badge badge-upgrade">UPGRADE</span> &mdash; gets 10 Commandments + genre form + song archetype rules + specific song brief from enrichment</span>
    </div>
    <div class="pipeline-arrow">&darr;</div>
    <div class="pipeline-step">
      <span class="step-num">5</span>
      <span class="step-text"><strong>Suno Translation Layer</strong> <span class="badge badge-new">NEW</span> &mdash; converts craft concepts into two outputs: Suno style string + annotated lyrics with structure metatags (see Section 9)</span>
    </div>
  </div>
</div>

<!-- ============ SECTION 4: Genre-Specific Principles ============ -->
<h2>4. Per-Genre Principle Application</h2>
<div class="genre-grid">

  <!-- Classic Broadway -->
  <div class="genre-card open" onclick="this.classList.toggle('open')">
    <div class="genre-header">
      <span class="genre-icon">ðŸŽ­</span>
      <span class="genre-name">Classic Broadway</span>
      <span class="genre-toggle">&#9654;</span>
    </div>
    <div class="genre-body">
      <div style="margin-bottom:10px;">
        <span class="form-tag form-aaba">AABA</span>
        <span style="font-size:0.8rem; color:var(--cream-muted);">Primary form &mdash; 32-bar chorus, 8-bar sections</span>
      </div>
      <ul>
        <li><strong>Melody &gt; Lyric complexity.</strong> Lush, singable lines. Sustained vowels on gold notes.</li>
        <li><strong>Subtext is king.</strong> "People Will Say We're In Love" &mdash; list don'ts to reveal do's.</li>
        <li><strong>B section = contrast.</strong> More chromatic, more movement, propels into final A.</li>
        <li><strong>Chorus reframed</strong> each time &mdash; same melody, shifted context gives progression.</li>
        <li><strong>Charm song</strong> after all characters introduced (Act I) or opening of Act II.</li>
        <li><strong>Specificity</strong>: "Cherries an' hops, melons down in the Imperial" not "I traveled everywhere."</li>
      </ul>
      <div class="note-box">
        <h4>Reference Models</h4>
        <p>Waitin' for My Dearie, To Life, Never Never Land, If I Loved You, People Will Say We're In Love</p>
      </div>
    </div>
  </div>

  <!-- Rock Opera -->
  <div class="genre-card" onclick="this.classList.toggle('open')">
    <div class="genre-header">
      <span class="genre-icon">ðŸŽ¸</span>
      <span class="genre-name">Rock Opera</span>
      <span class="genre-toggle">&#9654;</span>
    </div>
    <div class="genre-body">
      <div style="margin-bottom:10px;">
        <span class="form-tag form-vcvc">V/C/V/C/B/C</span>
        <span style="font-size:0.8rem; color:var(--cream-muted);">Pop-rock form fits naturally. Keep it.</span>
      </div>
      <ul>
        <li><strong>Raw energy &gt; polish.</strong> Can break form when emotion demands it.</li>
        <li><strong>Dramatic progression still applies</strong> &mdash; ascending intensity, each verse raises stakes.</li>
        <li><strong>"A Boy Like That" model</strong> &mdash; hit emotional peaks immediately, no slow setup.</li>
        <li><strong>Confrontation = dueling voices</strong>, rapid-fire exchanges, build to a scream.</li>
        <li><strong>Act II dip</strong> &mdash; stripped-back, acoustic. Armor off. Then rebuild to anthem.</li>
        <li><strong>Specificity through rebellion</strong> &mdash; specific grievances, not vague angst.</li>
      </ul>
      <div class="note-box">
        <h4>Reference Models</h4>
        <p>A Boy Like That (WSS), Cool (WSS), No Place Like London (Sweeney Todd)</p>
      </div>
    </div>
  </div>

  <!-- Jukebox -->
  <div class="genre-card" onclick="this.classList.toggle('open')">
    <div class="genre-header">
      <span class="genre-icon">ðŸŽµ</span>
      <span class="genre-name">Jukebox Musical</span>
      <span class="genre-toggle">&#9654;</span>
    </div>
    <div class="genre-body">
      <div style="margin-bottom:10px;">
        <span class="form-tag form-abab">ABAB</span>
        <span style="font-size:0.8rem; color:var(--cream-muted);">Pop-friendly alternating form</span>
      </div>
      <ul>
        <li><strong>Hook is everything.</strong> One single, big idea per song. Radio-memorable chorus.</li>
        <li><strong>Melody &gt;&gt; lyric complexity.</strong> Simple, universal words. Let the tune carry.</li>
        <li><strong>Artist-driven style.</strong> User likely names a real artist &mdash; style prompts should mirror that artist's signature sound, arrangement, and era.</li>
        <li><strong>Charm song = the bread &amp; butter.</strong> Optimistic, steady beat, audience relaxes.</li>
        <li><strong>Comedy through truth</strong> &mdash; Contest Game (back-and-forth), Lamentation (over harmless things).</li>
        <li><strong>Declutter</strong> &mdash; fewer words, more room for melody. Singability first.</li>
      </ul>
      <div class="note-box idea">
        <h4>Feature Idea: Artist Research</h4>
        <p>When user names an existing artist (e.g. "ABBA", "Queen", "Stevie Wonder"), the app does a quick lookup of their musical style, typical arrangement, instrumentation, tempo range, and signature production techniques. This feeds directly into Suno style strings and lyrics guidance &mdash; so the output actually sounds like that artist's tradition, not generic pop.</p>
        <ul style="margin-top:6px;">
          <li>Could use DeepSeek with a "describe this artist's musical style in Suno tags" prompt</li>
          <li>Cache results for common artists</li>
          <li>Fall back to genre defaults if artist unknown</li>
        </ul>
      </div>
      <div class="note-box">
        <h4>Reference Models</h4>
        <p>Mamma Mia (ABBA), Jersey Boys (Four Seasons), Beautiful (Carole King), Moulin Rouge (mashup style), &amp; Juliet (Max Martin pop), Tina (Tina Turner)</p>
      </div>
    </div>
  </div>

  <!-- Disney -->
  <div class="genre-card" onclick="this.classList.toggle('open')">
    <div class="genre-header">
      <span class="genre-icon">âœ¨</span>
      <span class="genre-name">Disney-Style</span>
      <span class="genre-toggle">&#9654;</span>
    </div>
    <div class="genre-body">
      <div style="margin-bottom:10px;">
        <span class="form-tag form-aaba">AABA</span>
        <span style="font-size:0.8rem; color:var(--cream-muted);">Classic form with soaring B section</span>
      </div>
      <ul>
        <li><strong>I Want Song is THE moment.</strong> AABA mandatory. B section = chromatic lift, inverted intervals, propels to final A.</li>
        <li><strong>Villain Song = Comedy Song rules.</strong> Comedy from truth. Charismatic evil. Save best joke for last.</li>
        <li><strong>"Never Never Land" model</strong> &mdash; B section echoes/contrasts, final A lengthened for conclusion.</li>
        <li><strong>Fairy-tale specificity</strong> &mdash; magical details, sensory wonder, not generic "magical world."</li>
        <li><strong>Act II Opening = Charm Song.</strong> Found-family warmth. Melody &gt; lyric. Audience breathes.</li>
        <li><strong>Eleven O'Clock reprise</strong> &mdash; same I Want melody, reframed: now they HAVE the thing.</li>
      </ul>
      <div class="note-box">
        <h4>Reference Models</h4>
        <p>Never Never Land, Not While I'm Around, Waitin' for My Dearie (for I Want form)</p>
      </div>
    </div>
  </div>

  <!-- Hip-Hop -->
  <div class="genre-card" onclick="this.classList.toggle('open')">
    <div class="genre-header">
      <span class="genre-icon">ðŸŽ¤</span>
      <span class="genre-name">Hip-Hop Musical</span>
      <span class="genre-toggle">&#9654;</span>
    </div>
    <div class="genre-body">
      <div style="margin-bottom:10px;">
        <span class="form-tag form-free">FREE</span>
        <span style="font-size:0.8rem; color:var(--cream-muted);">Verse/Hook/Verse/Hook + spoken word bridges</span>
      </div>
      <ul>
        <li><strong>Lyrics &gt;&gt;&gt; melody.</strong> Dense wordplay, internal rhymes, every bar counts.</li>
        <li><strong>Still dramatic progression</strong> &mdash; bars in ascending order of punch. Write backwards.</li>
        <li><strong>Confrontation = rap battle.</strong> Contest Game archetype. Back-and-forth escalation.</li>
        <li><strong>Specificity through culture</strong> &mdash; real places, real slang, real details. Not generic "streets."</li>
        <li><strong>Comedy = Exaggerated Pronouncement</strong> or Philosophy Game.</li>
        <li><strong>R&amp;B sung hooks</strong> for choruses &mdash; universal want over specific verses.</li>
      </ul>
      <div class="note-box">
        <h4>Reference Models</h4>
        <p>Hamilton (My Shot, The Room Where It Happens, Wait For It), In The Heights (Breathe, 96,000, Blackout), The Wiz (Ease On Down The Road), Passing Strange</p>
      </div>
    </div>
  </div>

  <!-- Romantic -->
  <div class="genre-card" onclick="this.classList.toggle('open')">
    <div class="genre-header">
      <span class="genre-icon">ðŸ’«</span>
      <span class="genre-name">Romantic Musical</span>
      <span class="genre-toggle">&#9654;</span>
    </div>
    <div class="genre-body">
      <div style="margin-bottom:10px;">
        <span class="form-tag form-abab">ABAB</span>
        <span style="font-size:0.8rem; color:var(--cream-muted);">Gradually rising stanzas that need each other</span>
      </div>
      <ul>
        <li><strong>Subtext is EVERYTHING.</strong> "People Will Say We're In Love" &mdash; say love without saying love.</li>
        <li><strong>"If I Loved You" model</strong> &mdash; long winding prose bleeds naturally into sweeping chorus.</li>
        <li><strong>"Weekend in the Country" model</strong> &mdash; persuading song, stanzas musically need each other, gradually rising.</li>
        <li><strong>Sensory specificity</strong> &mdash; cold side of the bed, rain on windows, specific smells. Not abstract emotion.</li>
        <li><strong>Accompaniment: sparse &rarr; thick.</strong> Piano solo &rarr; strings enter &rarr; full. Forward motion in texture.</li>
        <li><strong>Duet = musical scene.</strong> Tension, persuasion, discovery built into structure (Shall We Dance model).</li>
      </ul>
      <div class="note-box">
        <h4>Reference Models</h4>
        <p>People Will Say We're In Love, If I Loved You, A Weekend in the Country, Shall We Dance</p>
      </div>
    </div>
  </div>
</div>

<!-- ============ SECTION 5: Song Role Energy & Tempo ============ -->
<h2>5. Song Role &rarr; Energy, Tempo &amp; Character</h2>
<div class="section highlight">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:16px;">
    <span class="badge badge-new">NEW</span> Each song role has a distinct energy signature and tempo range. These feed directly into Suno style prompts.
  </p>

  <!-- Opening Number -->
  <div style="margin-bottom:16px;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
      <strong style="color:var(--gold-light);">1. Opening Number</strong>
      <span class="tempo-tag">120-135 BPM</span>
    </div>
    <div class="energy-bar">
      <span class="label">Energy</span>
      <div class="bar-bg"><div class="bar-fill" style="width:55%; background:linear-gradient(90deg, var(--gold-dim), var(--gold));"></div></div>
      <span class="val">0.55</span>
    </div>
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong>"I Am" Song</strong> for ensemble. Sets the world. Moderate energy &mdash; NOT the highest point. One particular thing about this world, not everything.
    </p>
  </div>

  <!-- I Want Song -->
  <div style="margin-bottom:16px;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
      <strong style="color:var(--gold-light);">2. I Want Song</strong>
      <span class="tempo-tag">140+ BPM</span>
      <span class="badge badge-critical">HIGH ENERGY</span>
    </div>
    <div class="energy-bar">
      <span class="label">Energy</span>
      <div class="bar-bg"><div class="bar-fill" style="width:80%; background:linear-gradient(90deg, var(--gold), var(--orange));"></div></div>
      <span class="val">0.80</span>
    </div>
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong>Full of energy. Straight eighths. Driving tempo.</strong> AABA mandatory (Classic/Disney). Non-diegetic. Starting point of character arc &mdash; they may end the show in a totally different place. NOT a power ballad (too early for that).
    </p>
  </div>

  <!-- Confrontation -->
  <div style="margin-bottom:16px;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
      <strong style="color:var(--gold-light);">3. Confrontation</strong>
      <span class="tempo-tag">95-115 BPM</span>
    </div>
    <div class="energy-bar">
      <span class="label">Energy</span>
      <div class="bar-bg"><div class="bar-fill" style="width:90%; background:linear-gradient(90deg, var(--orange), var(--red));"></div></div>
      <span class="val">0.90</span>
    </div>
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong>Slower, punchier, more dynamic.</strong> Act I climax. Point of no return. Hit emotional peaks immediately (A Boy Like That model). Stakes increase each repetition. The slower tempo creates space for dramatic punch and dynamic contrast &mdash; heavy hits land harder at lower BPM.
    </p>
  </div>

  <!-- Act II Opening -->
  <div style="margin-bottom:16px;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
      <strong style="color:var(--gold-light);">4. Act II Opening</strong>
      <span class="tempo-tag">100-120 BPM</span>
    </div>
    <div class="energy-bar">
      <span class="label">Energy</span>
      <div class="bar-bg"><div class="bar-fill" style="width:30%; background:linear-gradient(90deg, var(--blue), var(--gold-dim));"></div></div>
      <span class="val">0.30</span>
    </div>
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong>Charm Song.</strong> Moment of relief. Doesn't move plot. Steady beat, optimistic. Melody &gt; lyric. DIP in tension. 4 approaches: group excitement, celebration, relaxed fun, world observation. Audience breathes.
    </p>
  </div>

  <!-- Eleven O'Clock -->
  <div style="margin-bottom:16px;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
      <strong style="color:var(--gold-light);">5. Eleven O'Clock Number</strong>
      <span class="tempo-tag">VARIES</span>
    </div>
    <div class="energy-bar">
      <span class="label">Energy</span>
      <div class="bar-bg"><div class="bar-fill" style="width:100%; background:linear-gradient(90deg, var(--orange), #F44336);"></div></div>
      <span class="val">1.00</span>
    </div>
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong>THE climax. Maximum emotional intensity.</strong> Can be a big ballad / power ballad OR high tempo &mdash; whatever serves the story's peak. End of chorus needs spark/surprise. Extension, high note, lyrical shift, or new chord. Coda usually 4 measures.
    </p>
  </div>

  <!-- Finale -->
  <div style="margin-bottom:0;">
    <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
      <strong style="color:var(--gold-light);">6. Finale</strong>
      <span class="tempo-tag">105-125 BPM</span>
    </div>
    <div class="energy-bar">
      <span class="label">Energy</span>
      <div class="bar-bg"><div class="bar-fill" style="width:60%; background:linear-gradient(90deg, var(--gold-dim), var(--gold));"></div></div>
      <span class="val">0.60</span>
    </div>
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong>A little laid back.</strong> Resolution + Reprise. Reframe the repeating chorus &mdash; same melody, shifted meaning. Earned catharsis, not another peak. The audience has already had the climax &mdash; this is the warm landing.
    </p>
  </div>
</div>

<!-- ============ SECTION 6: Dramatic Pacing ============ -->
<h2>6. Dramatic Pacing (Tension Arc)</h2>
<div class="section">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    <span class="badge badge-new">NEW</span> Currently missing from enrichment entirely. The MTBible's pacing model:
  </p>

  <div style="font-family:monospace; font-size:0.8rem; padding:12px; background:rgba(0,0,0,0.3); border-radius:8px; overflow-x:auto;">
    <pre style="color:var(--cream-muted); margin:0;">
Tension
  ^
  |                              /\
  |                             /  \  &lt;-- PEAK CLIMAX
  |        /\                  /    \     (11 O'Clock)
  |       /  \  ACT I         /      \
  |      /    \  climax      / ACT II \
  |   __/      \         ___/   builds \____
  |  /          \       /  ^                \
  | / Opening    \     / Charm              Finale
  |/ (moderate)   \___/  Song              (laid back)
  +------------------------------------------&gt; Time
  Song1   Song2  Song3  Song4   Song5   Song6
 0.55    0.80   0.90   0.30    1.00    0.60</pre>
  </div>

  <ul style="margin-top:12px;">
    <li><strong>Song 1 (Opening):</strong> Moderate energy (0.55). Set the world. NOT the highest point.</li>
    <li><strong>Song 2 (I Want):</strong> High energy (0.80). Driving, 140+ BPM, straight eighths. Rising fast.</li>
    <li><strong>Song 3 (Confrontation):</strong> Act I climax (0.90). Slower, punchier, dynamic. Point of no return.</li>
    <li><strong>Song 4 (Act II Opening):</strong> DIP (0.30). Charm song. Relief. Audience breathes.</li>
    <li><strong>Song 5 (11 O'Clock):</strong> <strong>PEAK CLIMAX (1.00).</strong> The highest point in the entire show. Maximum emotional intensity.</li>
    <li><strong>Song 6 (Finale):</strong> Laid back (0.60). Resolution. Earned catharsis. Warm landing, not another peak.</li>
  </ul>
</div>

<!-- ============ SECTION 7: Comedy Sub-Categories ============ -->
<h2>7. Comedy Song Games <span class="badge badge-new">NEW</span></h2>
<div class="section">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    When a song calls for comedy (any genre), the enrichment should assign a specific game:
  </p>

  <div class="archetype-row">
    <span class="archetype-label">Outlandish Story</span>
    <span class="archetype-desc">Character tells an absurd-yet-real tale. <em>Sing</em>, <em>Dance Ten Looks Three</em></span>
  </div>
  <div class="archetype-row">
    <span class="archetype-label">Philosophy</span>
    <span class="archetype-desc">Absolute certainty, create expectation then surprise. <em>Everybody Ought to Have a Maid</em></span>
  </div>
  <div class="archetype-row">
    <span class="archetype-label">Contest</span>
    <span class="archetype-desc">Back-and-forth escalation. <em>Anything You Can Do</em>, <em>A Little Priest</em></span>
  </div>
  <div class="archetype-row">
    <span class="archetype-label">Lamentation</span>
    <span class="archetype-desc">Over-the-top grief about something harmless. <em>Kids</em>, <em>Adelaide's Lament</em></span>
  </div>
  <div class="archetype-row">
    <span class="archetype-label">Exaggerated</span>
    <span class="archetype-desc">Big pronouncement played for laughs. <em>Officer Krupke</em>, <em>Everyone's a Little Bit Racist</em></span>
  </div>

  <div class="note-box">
    <h4>Key Comedy Rules</h4>
    <ul>
      <li>Comedy from TRUTH and pain/discomfort</li>
      <li>Music gets out of the way of lyric (tempo = speech rate)</li>
      <li>Gets funnier as it goes &mdash; save best for last</li>
      <li>Punch UP (at power), never down (at victims)</li>
      <li>Declutter: fewer words = more room for funny</li>
    </ul>
  </div>
</div>

<!-- ============ SECTION 8: Song & Lyric Examples ============ -->
<h2>8. Song &amp; Lyric Examples <span class="badge badge-new">NEW</span></h2>
<div class="section">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    Concrete examples of great MT lyrics organized by principle &mdash; these serve as few-shot examples for the LLM.
    <span class="badge badge-idea">EXPAND THIS SECTION</span> &mdash; more examples = richer enrichment.
  </p>

  <details>
    <summary>Subtext &mdash; saying it without saying it</summary>
    <div style="padding:8px 0;">
      <p style="font-size:0.85rem; color:var(--gold-light); font-weight:bold; margin-bottom:4px;">People Will Say We're In Love (Rodgers &amp; Hammerstein)</p>
      <p style="font-size:0.8rem; color:var(--cream-muted); font-style:italic; margin-bottom:6px;">Laurey lists "don'ts" to Curly to prove their love is untrue &mdash; actually revealing it:</p>
      <div style="font-size:0.85rem; padding:8px 12px; background:rgba(0,0,0,0.3); border-radius:6px; border-left:2px solid var(--gold-dim); font-style:italic;">
        Don't throw bouquets at me<br>
        Don't please my folks too much<br>
        Don't laugh at my jokes too much<br>
        People will say we're in love...
      </div>
      <p style="font-size:0.75rem; color:var(--cream-muted); margin-top:6px;"><strong>Principle:</strong> The character argues AGAINST the truth, which makes the truth undeniable.</p>
    </div>
  </details>

  <details>
    <summary>Specificity &mdash; concrete details vs. generic</summary>
    <div style="padding:8px 0;">
      <p style="font-size:0.85rem; color:var(--red); font-weight:bold; margin-bottom:4px;">BAD &mdash; Generic (Sweethearts, 1913)</p>
      <div style="font-size:0.85rem; padding:8px 12px; background:rgba(229,57,53,0.08); border-radius:6px; border-left:2px solid var(--red); font-style:italic;">
        If you ask where love is found<br>
        The sort of love that's fond and true...
      </div>
      <p style="font-size:0.75rem; color:var(--cream-muted); margin-top:4px; margin-bottom:12px;">Blocky, vague, archaic. Nobody talks like this. No direction, no fresh images.</p>

      <p style="font-size:0.85rem; color:var(--green); font-weight:bold; margin-bottom:4px;">GOOD &mdash; Specific (Not While I'm Around, Sondheim)</p>
      <div style="font-size:0.85rem; padding:8px 12px; background:rgba(76,175,80,0.08); border-radius:6px; border-left:2px solid var(--green); font-style:italic;">
        Demons are prowling everywhere nowadays<br>
        I'll send 'em howling, I don't care<br>
        I got ways...
      </div>
      <p style="font-size:0.75rem; color:var(--cream-muted); margin-top:4px; margin-bottom:12px;">Says "I love you / I'll protect you" with fresh, vivid, character-specific images.</p>

      <p style="font-size:0.85rem; color:var(--green); font-weight:bold; margin-bottom:4px;">GOOD &mdash; Specific (Death of a Salesman, Arthur Miller)</p>
      <div style="font-size:0.85rem; padding:8px 12px; background:rgba(76,175,80,0.08); border-radius:6px; border-left:2px solid var(--green); font-style:italic;">
        He's the man way out there in the blue, riding on a smile and a shoeshine. And when they start not smiling back &mdash; that's an earthquake...
      </div>
      <p style="font-size:0.75rem; color:var(--cream-muted); margin-top:4px;">Not "he was a salesman who traveled." SPECIFIC sensory images that make you FEEL it.</p>
    </div>
  </details>

  <details>
    <summary>AABA Form &mdash; Statement, Restatement, Contrast, Conclusion</summary>
    <div style="padding:8px 0;">
      <p style="font-size:0.85rem; color:var(--gold-light); font-weight:bold; margin-bottom:4px;">Waitin' for My Dearie (Lerner &amp; Loewe)</p>
      <div style="font-size:0.85rem; padding:8px 12px; background:rgba(0,0,0,0.3); border-radius:6px; border-left:2px solid var(--blue);">
        <strong style="color:var(--blue);">(A)</strong> <em>Waitin' for my dearie / An' happy am I / To hold my heart till he comes strollin' by</em><br><br>
        <strong style="color:var(--blue);">(A)</strong> <em>When he comes, my dearie / One look an' I'll know / That he's the dearie I've been wantin' so</em><br><br>
        <strong style="color:var(--orange);">(B)</strong> <em>Though I'll live forty lives / Till the day he arrives / I'll not ever, ever grieve...</em><br>
        <span style="font-size:0.75rem; color:var(--orange);">More movement, more chromatic, inverted intervals &mdash; PROPELS into final A</span><br><br>
        <strong style="color:var(--blue);">(A)</strong> <em>There's a laddie weary / An' wanderin' free...</em><br>
        <span style="font-size:0.75rem; color:var(--green);">Slight surprise, shortening, lyrical conclusion</span>
      </div>
    </div>
  </details>

  <details>
    <summary>Dramatic Progression &mdash; escalating stakes same structure</summary>
    <div style="padding:8px 0;">
      <p style="font-size:0.85rem; color:var(--gold-light); font-weight:bold; margin-bottom:4px;">A Healthy Normal American Boy (Bye Bye Birdie)</p>
      <p style="font-size:0.8rem; color:var(--cream-muted); margin-bottom:6px;">Same musical sequence repeated 4 times while stakes and intensity increase each time. "Refrain is the hook, anchor, homebase."</p>
      <p style="font-size:0.75rem; color:var(--cream-muted);"><strong>Principle:</strong> Repetition + escalation. Each pass through the same structure hits harder because the context has shifted.</p>
    </div>
  </details>

  <details>
    <summary>Scene Construction &mdash; dialogue bleeding into song</summary>
    <div style="padding:8px 0;">
      <p style="font-size:0.85rem; color:var(--gold-light); font-weight:bold; margin-bottom:4px;">If I Loved You (Carousel)</p>
      <p style="font-size:0.8rem; color:var(--cream-muted);">Extensive park bench scene: long, winding prose/dialogue ("We don't count at all...") transitions naturally into a sweeping AABA chorus. The song doesn't start cold &mdash; it GROWS out of the conversation.</p>

      <p style="font-size:0.85rem; color:var(--gold-light); font-weight:bold; margin-top:10px; margin-bottom:4px;">A Boy Like That (West Side Story)</p>
      <p style="font-size:0.8rem; color:var(--cream-muted);">Dramatic setup bleeds directly into song, hitting emotional peaks IMMEDIATELY. No warm-up &mdash; full intensity from bar one.</p>
    </div>
  </details>
</div>

<!-- ============ SECTION 9: Prompt Economy & Sonic Cohesion ============ -->
<h2>9. Prompt Economy &amp; Sonic Cohesion <span class="badge badge-critical">CRITICAL</span></h2>
<div class="section highlight">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:16px;">
    The MTBible is a <strong>knowledge base for us</strong>, not a dump into every prompt. More instructions = worse output from both DeepSeek and Suno. Quality over quantity.
  </p>

  <h3 style="font-size:0.95rem; color:var(--red);">The Overload Problem</h3>
  <div class="comparison" style="margin-bottom:16px;">
    <div class="col-current">
      <h3>Overloaded Prompt</h3>
      <ul>
        <li>All 10 Commandments</li>
        <li>+ Genre rules</li>
        <li>+ Song form instructions</li>
        <li>+ Archetype rules</li>
        <li>+ Energy/tempo</li>
        <li>+ Reference examples</li>
        <li>+ Specificity doctrine</li>
        <li>= LLM hedges, gets generic, fixates on one rule and ignores others</li>
      </ul>
    </div>
    <div class="col-proposed">
      <h3>Curated Prompt</h3>
      <ul>
        <li><strong>3-5 rules max</strong> per song</li>
        <li>Picked by enrichment step</li>
        <li>Most relevant to THIS song role</li>
        <li>= LLM focuses, delivers on what matters</li>
      </ul>
      <p style="font-size:0.8rem; color:var(--green); margin-top:8px; font-weight:bold;">The enrichment step is the CURATOR.</p>
    </div>
  </div>

  <h3 style="font-size:0.95rem;">Budget Per Layer</h3>
  <div style="margin-top:8px;">
    <div class="archetype-row">
      <span class="archetype-label" style="min-width:130px;">Enrichment (DeepSeek)</span>
      <span class="archetype-desc">
        <strong>This is where MTBible knowledge lives.</strong> The dramaturg. Decides WHICH principles matter for THIS show and THIS song. Outputs focused <code>song_briefs[]</code> with 3-5 targeted instructions per song &mdash; not a wall of rules.
      </span>
    </div>
    <div class="archetype-row">
      <span class="archetype-label" style="min-width:130px;">Lyrics (DeepSeek)</span>
      <span class="archetype-desc">
        Receives <strong>only the brief for THAT song</strong>. Short, focused. 2-3 key commandments most relevant to the song role. E.g. I Want gets #4 (Specificity) + #5 (Dramatic Progression). Comedy song gets "save best for last" + "punch up."
      </span>
    </div>
    <div class="archetype-row">
      <span class="archetype-label" style="min-width:130px;">Suno Style</span>
      <span class="archetype-desc">
        <strong>5-6 tags max.</strong> Genre + instrument + mood + tempo + vocal. Done. First 20-30 words carry most weight. More tags = more confused, muddier output.
      </span>
    </div>
  </div>

  <h3 style="font-size:0.95rem; margin-top:20px; color:var(--gold);">Sonic Cohesion &mdash; One Show, One Sound</h3>
  <div class="note-box" style="background:rgba(201,168,76,0.08); border-color:rgba(201,168,76,0.25);">
    <h4 style="color:var(--gold);">The Problem</h4>
    <p style="margin-bottom:8px;">Currently each song's style prompt is built <strong>independently</strong> &mdash; no awareness of the other 5 songs. Track 1 could sound like 1940s big band while Track 4 sounds like modern pop. The show has no sonic identity.</p>

    <h4 style="color:var(--gold);">The Solution: Show DNA</h4>
    <p style="margin-bottom:8px;">The enrichment step defines a <strong>show_style_dna</strong> &mdash; a consistent core style string that anchors ALL 6 songs. Individual songs vary in energy, tempo, and mood, but share the same:</p>
    <ul>
      <li><strong>Genre anchor</strong> &mdash; e.g. <code>Broadway, orchestral</code> appears in every song's style</li>
      <li><strong>Core instruments</strong> &mdash; e.g. <code>grand piano, strings</code> are always present (others added/removed per song)</li>
      <li><strong>Vocal identity</strong> &mdash; e.g. <code>belting female vocals</code> or <code>male tenor</code> stays consistent</li>
      <li><strong>Era/production</strong> &mdash; e.g. <code>modern musical theater, polished</code> across all tracks</li>
    </ul>
    <p style="margin-top:8px; font-size:0.8rem; color:var(--cream-muted);">Each song then <strong>layers variations ON TOP</strong> of the DNA: the Confrontation adds <code>intense, minor key, dramatic</code>. The Charm Song adds <code>warm, gentle, playful</code>. But the foundation stays the same.</p>
  </div>

  <div style="margin-top:12px; padding:12px; background:rgba(0,0,0,0.3); border-radius:8px;">
    <p style="font-size:0.8rem; color:var(--gold-light); margin-bottom:8px;"><strong>Example: Classic Broadway Show DNA</strong></p>
    <p style="font-size:0.8rem; font-family:monospace; color:var(--cream); margin-bottom:10px;">
      <strong>DNA (shared):</strong> Broadway, orchestral, grand piano, lush strings, belting female vocals, theatrical, modern
    </p>
    <div style="font-size:0.8rem; color:var(--cream-muted);">
      <div style="display:flex; gap:6px; margin-bottom:4px;">
        <span style="color:var(--gold); min-width:90px;">Song 1:</span>
        <span>DNA + <code>ensemble, upbeat, bright, 125 BPM</code></span>
      </div>
      <div style="display:flex; gap:6px; margin-bottom:4px;">
        <span style="color:var(--gold); min-width:90px;">Song 2:</span>
        <span>DNA + <code>soaring melody, building, driving, 140 BPM</code></span>
      </div>
      <div style="display:flex; gap:6px; margin-bottom:4px;">
        <span style="color:var(--gold); min-width:90px;">Song 3:</span>
        <span>DNA + <code>intense, dramatic, minor key, punchy, 105 BPM</code></span>
      </div>
      <div style="display:flex; gap:6px; margin-bottom:4px;">
        <span style="color:var(--gold); min-width:90px;">Song 4:</span>
        <span>DNA + <code>warm, gentle, playful, mid-tempo, 110 BPM</code></span>
      </div>
      <div style="display:flex; gap:6px; margin-bottom:4px;">
        <span style="color:var(--gold); min-width:90px;">Song 5:</span>
        <span>DNA + <code>powerful, emotional climax, building to crescendo</code></span>
      </div>
      <div style="display:flex; gap:6px;">
        <span style="color:var(--gold); min-width:90px;">Song 6:</span>
        <span>DNA + <code>warm, bittersweet, reprise, cathartic, 115 BPM</code></span>
      </div>
    </div>
  </div>

  <div style="margin-top:12px;">
    <p style="font-size:0.8rem; color:var(--cream-muted);">
      <strong style="color:var(--gold-light);">Implementation:</strong> Enrichment step outputs <code>show_style_dna: string</code> (the shared core). <code>buildSongStylePrompt</code> concatenates: <code>show_style_dna + song_role_modifiers</code>. Total stays under 5-6 descriptors because the DNA IS the base, not an addition.
    </p>
  </div>
</div>

<!-- ============ SECTION 10: Suno Translation Layer ============ -->
<h2>10. Suno Translation Layer <span class="badge badge-new">NEW</span></h2>
<div class="section highlight">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    Suno has <strong>two input surfaces</strong>. Our translation layer must output BOTH.
  </p>

  <div class="comparison" style="margin-bottom:16px;">
    <div style="background:rgba(201,168,76,0.08); border:1px solid rgba(201,168,76,0.2); border-radius:10px; padding:12px;">
      <h3 style="color:var(--gold-light); font-size:0.95rem;">Style Field (1000 chars)</h3>
      <p style="font-size:0.8rem; color:var(--cream-muted); margin-bottom:6px;">Genre, mood, instruments, vocal type, tempo, production quality.</p>
      <p style="font-size:0.8rem;">Formula: <code>[Genre] + [Instruments] + [Mood] + [Tempo] + [Vocal] + [Production]</code></p>
      <p style="font-size:0.75rem; color:var(--cream-muted); margin-top:4px;">4-7 descriptors sweet spot. First 20-30 words carry most weight. Lead with genre.</p>
    </div>
    <div style="background:rgba(66,165,245,0.08); border:1px solid rgba(66,165,245,0.2); border-radius:10px; padding:12px;">
      <h3 style="color:var(--blue); font-size:0.95rem;">Lyrics Field (metatags)</h3>
      <p style="font-size:0.8rem; color:var(--cream-muted); margin-bottom:6px;">Structure tags interspersed with lyrics on their own lines.</p>
      <p style="font-size:0.8rem;">Tags: <span class="suno-tag suno-structure">[Verse 1]</span> <span class="suno-tag suno-structure">[Chorus]</span> <span class="suno-tag suno-structure">[Bridge]</span> <span class="suno-tag suno-structure">[Big Finish]</span></p>
      <p style="font-size:0.75rem; color:var(--cream-muted); margin-top:4px;">Keep tags 1-3 words. Lyrics must MATCH tag intent (chorus reads like chorus).</p>
    </div>
  </div>

  <h3 style="font-size:0.95rem;">Confirmed Working Tags</h3>

  <details open>
    <summary>Genre Tags (Broadway-relevant)</summary>
    <div style="padding:6px 0;">
      <span class="suno-tag">Broadway</span>
      <span class="suno-tag">Musical theater</span>
      <span class="suno-tag">Opera</span>
      <span class="suno-tag">Operatic Pop</span>
      <span class="suno-tag">Dark Cabaret</span>
      <span class="suno-tag">Big Band</span>
      <span class="suno-tag">Swing</span>
      <span class="suno-tag">Vocal Jazz</span>
      <span class="suno-tag">Classical Crossover</span>
      <span class="suno-tag">Orchestral</span>
      <span class="suno-tag">Cinematic</span>
      <span class="suno-tag">Ballad</span>
      <span class="suno-tag">Hip-hop</span>
      <span class="suno-tag">Rap</span>
      <span class="suno-tag">R&amp;B</span>
      <span class="suno-tag">Pop</span>
      <span class="suno-tag">Rock</span>
      <span class="suno-tag">Punk rock</span>
      <span class="suno-tag">Alt-rock</span>
      <span class="suno-tag">Indie folk</span>
      <span class="suno-tag">Singer-Songwriter</span>
    </div>
  </details>

  <details>
    <summary>Vocal Tags</summary>
    <div style="padding:6px 0;">
      <span class="suno-tag">[Belting]</span>
      <span class="suno-tag">[Operatic]</span>
      <span class="suno-tag">[Falsetto]</span>
      <span class="suno-tag">[Crooning]</span>
      <span class="suno-tag">[Whisper]</span>
      <span class="suno-tag">[Spoken Word]</span>
      <span class="suno-tag">[Rap]</span>
      <span class="suno-tag">[Harmonies]</span>
      <span class="suno-tag">[Female Vocal]</span>
      <span class="suno-tag">[Male Vocal]</span>
      <span class="suno-tag">[Duet]</span>
      <span class="suno-tag">[Choir]</span>
      <span class="suno-tag">[Powerful]</span>
      <span class="suno-tag">[Vulnerable]</span>
      <span class="suno-tag">[Defiant]</span>
    </div>
  </details>

  <details>
    <summary>Instrument Tags</summary>
    <div style="padding:6px 0;">
      <span class="suno-tag">[Grand Piano]</span>
      <span class="suno-tag">[Piano]</span>
      <span class="suno-tag">[Orchestral Strings]</span>
      <span class="suno-tag">[String Quartet]</span>
      <span class="suno-tag">[Violin Solo]</span>
      <span class="suno-tag">[Cello]</span>
      <span class="suno-tag">[Harp]</span>
      <span class="suno-tag">[Brass Section]</span>
      <span class="suno-tag">[Trumpet]</span>
      <span class="suno-tag">[French Horn]</span>
      <span class="suno-tag">[Saxophone]</span>
      <span class="suno-tag">[Full Orchestra]</span>
      <span class="suno-tag">[Electric Guitar]</span>
      <span class="suno-tag">[Acoustic Guitar]</span>
      <span class="suno-tag">[808s]</span>
    </div>
  </details>

  <details>
    <summary>Structure Tags (in lyrics field)</summary>
    <div style="padding:6px 0;">
      <span class="suno-tag suno-structure">[Verse 1]</span>
      <span class="suno-tag suno-structure">[Verse 2]</span>
      <span class="suno-tag suno-structure">[Pre-Chorus]</span>
      <span class="suno-tag suno-structure">[Chorus]</span>
      <span class="suno-tag suno-structure">[Bridge]</span>
      <span class="suno-tag suno-structure">[Hook]</span>
      <span class="suno-tag suno-structure">[Instrumental]</span>
      <span class="suno-tag suno-structure">[Piano Solo]</span>
      <span class="suno-tag suno-structure">[Build-up]</span>
      <span class="suno-tag suno-structure">[Crescendo]</span>
      <span class="suno-tag suno-structure">[Outro: Big finish]</span>
      <span class="suno-tag suno-structure">[Outro: Fade out]</span>
      <span class="suno-tag suno-structure">[Short Instrumental Intro]</span>
      <br><br>
      <span class="suno-tag suno-bad">[Intro]</span>
      <span style="font-size:0.75rem; color:var(--red);"> Unreliable &mdash; use descriptive variant instead</span>
    </div>
  </details>

  <details>
    <summary>Dynamic / Production Tags</summary>
    <div style="padding:6px 0;">
      <span class="suno-tag">[Crescendo]</span>
      <span class="suno-tag">[Starts out quietly]</span>
      <span class="suno-tag">[Big Finish]</span>
      <span class="suno-tag">[Sparse]</span>
      <span class="suno-tag">[Lush]</span>
      <span class="suno-tag">[Atmospheric]</span>
      <span class="suno-tag">[Strings Rise]</span>
      <span style="font-size:0.75rem; display:block; margin-top:6px; color:var(--cream-muted);">Also in style field: <code>building</code>, <code>cinematic build</code>, <code>orchestral swell</code>, <code>intimate</code>, <code>raw</code>, <code>polished</code></span>
    </div>
  </details>

  <h3 style="font-size:0.95rem; margin-top:16px;">Critical Rules</h3>
  <div style="margin-top:8px;">
    <ul>
      <li><strong style="color:var(--red);">NO negative prompts.</strong> <span class="suno-tag suno-bad">no drums</span> makes Suno ADD drums. Specify what you WANT: <span class="suno-tag">solo piano</span>, <span class="suno-tag">acapella</span></li>
      <li><strong>AABA form must be manually structured.</strong> Suno doesn't understand "AABA" &mdash; map it to: <span class="suno-tag suno-structure">[Verse 1]</span> <span class="suno-tag suno-structure">[Verse 2]</span> <span class="suno-tag suno-structure">[Bridge]</span> <span class="suno-tag suno-structure">[Verse 3]</span></li>
      <li><strong>BPM can be specified:</strong> <span class="suno-tag">[Tempo: 140 BPM]</span> &mdash; useful for driving I Want songs</li>
      <li><strong>Era tags work:</strong> <span class="suno-tag">1940s Big Band</span> <span class="suno-tag">modern musical theater</span></li>
      <li><strong>Lyrics must match intent.</strong> A <span class="suno-tag suno-structure">[Chorus]</span> tag only works if lyrics actually read like a chorus (short, hooky, repeatable)</li>
      <li><strong>Limit instrument tags</strong> to 2-3 per section for best results</li>
    </ul>
  </div>

  <h3 style="font-size:0.95rem; margin-top:16px;">Form &rarr; Structure Tag Translation</h3>
  <div style="margin-top:8px;">
    <div class="archetype-row">
      <span class="archetype-label"><span class="form-tag form-aaba">AABA</span></span>
      <span class="archetype-desc">
        <span class="suno-tag suno-structure">[Verse 1]</span> A &rarr;
        <span class="suno-tag suno-structure">[Verse 2]</span> A &rarr;
        <span class="suno-tag suno-structure">[Bridge]</span> B &rarr;
        <span class="suno-tag suno-structure">[Verse 3]</span> A (conclusion)
      </span>
    </div>
    <div class="archetype-row">
      <span class="archetype-label"><span class="form-tag form-abab">ABAB</span></span>
      <span class="archetype-desc">
        <span class="suno-tag suno-structure">[Verse 1]</span> A &rarr;
        <span class="suno-tag suno-structure">[Chorus]</span> B &rarr;
        <span class="suno-tag suno-structure">[Verse 2]</span> A &rarr;
        <span class="suno-tag suno-structure">[Chorus]</span> B
      </span>
    </div>
    <div class="archetype-row">
      <span class="archetype-label"><span class="form-tag form-vcvc">V/C/V/C/B/C</span></span>
      <span class="archetype-desc">
        <span class="suno-tag suno-structure">[Verse 1]</span> &rarr;
        <span class="suno-tag suno-structure">[Chorus]</span> &rarr;
        <span class="suno-tag suno-structure">[Verse 2]</span> &rarr;
        <span class="suno-tag suno-structure">[Chorus]</span> &rarr;
        <span class="suno-tag suno-structure">[Bridge]</span> &rarr;
        <span class="suno-tag suno-structure">[Chorus]</span>
      </span>
    </div>
    <div class="archetype-row">
      <span class="archetype-label"><span class="form-tag form-free">FREE</span></span>
      <span class="archetype-desc">
        <span class="suno-tag suno-structure">[Verse 1]</span> &rarr;
        <span class="suno-tag suno-structure">[Hook]</span> &rarr;
        <span class="suno-tag suno-structure">[Verse 2]</span> &rarr;
        <span class="suno-tag suno-structure">[Hook]</span> &rarr;
        <span class="suno-tag suno-structure">[Bridge]</span> (spoken word) &rarr;
        <span class="suno-tag suno-structure">[Hook]</span>
      </span>
    </div>
  </div>

  <h3 style="font-size:0.95rem; margin-top:16px;">Example: Broadway I Want Song</h3>
  <div style="margin-top:8px; padding:12px; background:rgba(0,0,0,0.3); border-radius:8px;">
    <p style="font-size:0.8rem; color:var(--gold-light); margin-bottom:6px;"><strong>Style field:</strong></p>
    <p style="font-size:0.8rem; font-family:monospace; color:var(--cream); margin-bottom:12px;">
      Broadway, dramatic, orchestral, soaring melody, belting female vocals, grand piano, lush strings, building, 140 BPM, theatrical
    </p>
    <p style="font-size:0.8rem; color:var(--blue); margin-bottom:6px;"><strong>Lyrics field:</strong></p>
    <pre style="font-size:0.8rem; color:var(--cream-muted); margin:0; white-space:pre-wrap;">[Short Instrumental Intro]

[Verse 1]
(A section - statement, intimate, piano-led)

[Verse 2]
(A section - restatement, strings entering, builds)

[Bridge]
(B section - contrast, chromatic, new energy, PROPELS forward)

[Verse 3]
(A section - conclusion, full orchestra, belted, slight surprise)

[Outro: Big finish]</pre>
  </div>
</div>

<!-- ============ SECTION 11: Implementation Checklist ============ -->
<h2>11. Implementation Checklist</h2>
<div class="section">
  <p style="font-size:0.85rem; color:var(--cream-muted); margin-bottom:12px;">
    Files to modify &amp; what changes in each:
  </p>

  <details>
    <summary>lib/musical-types.ts <span class="badge badge-upgrade">MAJOR</span></summary>
    <ul>
      <li>Add <code>song_form</code> per genre (AABA, ABAB, V/C/B/C, FREE)</li>
      <li>Add <code>mt_principles</code> per genre &mdash; which MTBible rules apply and HOW</li>
      <li>Add <code>song_archetype</code> per song role &mdash; Charm, Comedy Game type, etc.</li>
      <li>Add <code>energy_level</code> + <code>tempo_range</code> per song role</li>
      <li>Expand <code>lyrics_guidance</code> with MTBible-informed craft rules</li>
      <li>Add <code>accompaniment_guidance</code> &mdash; sparse-to-thick progression, groove, instrumentation</li>
      <li>Add <code>suno_style_base</code> per genre &mdash; pre-built Suno genre tags</li>
      <li>Add <code>suno_structure_template</code> per form &mdash; metatag sequence</li>
      <li>Add <code>reference_examples</code> per song role &mdash; "model this on..."</li>
    </ul>
  </details>

  <details>
    <summary>lib/prompts.ts <span class="badge badge-upgrade">MAJOR</span></summary>
    <ul>
      <li><code>buildEnrichmentPrompt</code> &mdash; inject pacing/tension arc, specificity doctrine, genre craft principles. Output: <code>show_style_dna</code> + curated <code>song_briefs[]</code> (3-5 rules each, not all 10)</li>
      <li><code>buildSongLyricsPrompt</code> &mdash; receives ONLY that song's brief. 2-3 most relevant commandments. Genre-specific form. No prompt overload.</li>
      <li><code>buildSongStylePrompt</code> &mdash; rewrite: <code>show_style_dna + song_role_modifiers</code> = 5-6 total Suno tags. Sonic cohesion across all 6 songs.</li>
      <li>New: <code>buildSunoStructureTemplate</code> &mdash; convert song form to Suno metatag sequence</li>
      <li>Add ShowConcept output fields: <code>show_style_dna</code>, <code>tension_pacing</code>, per-song <code>song_briefs[]</code></li>
    </ul>
  </details>

  <details>
    <summary>lib/suno-kie.ts <span class="badge badge-upgrade">MEDIUM</span></summary>
    <ul>
      <li>Accept annotated lyrics (with structure metatags) from translation layer</li>
      <li>Pass BPM hint in style string when available</li>
      <li>Ensure style string stays under 1000 chars, prioritize first 30 words</li>
    </ul>
  </details>

  <details>
    <summary>lib/types.ts <span class="badge badge-upgrade">MINOR</span></summary>
    <ul>
      <li>Extend <code>ShowConcept</code> with <code>tension_pacing</code> and <code>song_briefs</code></li>
      <li>Add <code>SongForm</code> type (AABA | ABAB | ABAC | VCVCBC | FREE)</li>
      <li>Add <code>ComedyGame</code> type if applicable</li>
      <li>Add <code>EnergyLevel</code> and <code>TempoRange</code> types</li>
    </ul>
  </details>

  <details>
    <summary>lib/generate-show.ts <span class="badge badge-keep">MINOR</span></summary>
    <ul>
      <li>Pass new enrichment fields through to track creation</li>
      <li>Store song_briefs in track metadata</li>
      <li>For Jukebox: add optional artist research step before enrichment</li>
    </ul>
  </details>

  <details open>
    <summary>MTBible.md <span class="badge badge-keep">REFERENCE</span></summary>
    <ul>
      <li>Already saved. Source of truth for all principles.</li>
      <li>Not imported in code &mdash; principles are distilled into configs and prompts.</li>
    </ul>
  </details>
</div>

<div class="footer">
  BROADWAYIFY &mdash; Libretto MTBible Enrichment Map<br>
  Built for internal planning. Not for public distribution.<br>
  Last updated: Feb 2026
</div>

<script>
// All genre cards start collapsed except first
// Click handling is done via onclick in HTML
</script>
</body>
</html>
